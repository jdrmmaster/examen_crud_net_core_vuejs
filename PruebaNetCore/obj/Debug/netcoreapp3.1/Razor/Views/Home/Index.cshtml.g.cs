#pragma checksum "C:\Users\DavidMarte\Documents\Proyectos\PruebaNetCore\PruebaNetCore\Views\Home\Index.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "0fff7b8d2cbd3f600ca1c873d5b846615f231b2c"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Home_Index), @"mvc.1.0.view", @"/Views/Home/Index.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\DavidMarte\Documents\Proyectos\PruebaNetCore\PruebaNetCore\Views\_ViewImports.cshtml"
using PruebaNetCore;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\DavidMarte\Documents\Proyectos\PruebaNetCore\PruebaNetCore\Views\_ViewImports.cshtml"
using PruebaNetCore.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"0fff7b8d2cbd3f600ca1c873d5b846615f231b2c", @"/Views/Home/Index.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"a503c3ef0ccabbfa7aa6be915fd926adc5cb7dba", @"/Views/_ViewImports.cshtml")]
    public class Views_Home_Index : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<dynamic>
    {
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_0 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute("v-for", new global::Microsoft.AspNetCore.Html.HtmlString("item in tipos"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        private static readonly global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute __tagHelperAttribute_1 = new global::Microsoft.AspNetCore.Razor.TagHelpers.TagHelperAttribute(":value", new global::Microsoft.AspNetCore.Html.HtmlString("item.idTipoPermiso"), global::Microsoft.AspNetCore.Razor.TagHelpers.HtmlAttributeValueStyle.DoubleQuotes);
        #line hidden
        #pragma warning disable 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperExecutionContext __tagHelperExecutionContext;
        #pragma warning restore 0649
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner __tagHelperRunner = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperRunner();
        #pragma warning disable 0169
        private string __tagHelperStringValueBuffer;
        #pragma warning restore 0169
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __backed__tagHelperScopeManager = null;
        private global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager __tagHelperScopeManager
        {
            get
            {
                if (__backed__tagHelperScopeManager == null)
                {
                    __backed__tagHelperScopeManager = new global::Microsoft.AspNetCore.Razor.Runtime.TagHelpers.TagHelperScopeManager(StartTagHelperWritingScope, EndTagHelperWritingScope);
                }
                return __backed__tagHelperScopeManager;
            }
        }
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper;
        private global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper;
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\Users\DavidMarte\Documents\Proyectos\PruebaNetCore\PruebaNetCore\Views\Home\Index.cshtml"
  
    ViewData["Title"] = "Home Page";

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
<div class=""text-center"">
    <h1 class=""display-4"">Examen CRUD .Net Core con Vue js</h1> 
</div>

<div class=""row"">
    <div id=""app"">
        <div class=""form-inline""> 
            
        </div>

        <div class=""row"">
            <table class=""table"">
                <thead>
                    <tr>
                        <th scope=""col"">Id</th>
                        <th scope=""col"">Nombre Empleado</th>
                        <th scope=""col"">Apellido Empleado</th>
                        <th scope=""col"">Fecha Permiso</th>
                        <th scope=""col"">Tipo Permiso</th>
                        <th scope=""col""></th>
                        <th scope=""col""><button type=""button"" data-toggle=""modal"" data-target=""#modalEdit"" class=""btn btn-success"" v-on:click=""initCreate"">Create</button></th>
                    </tr>
                </thead>
                <tbody>

                    <tr v-bind:key=""element.idPermiso"" v-for=""element in permisos"">
                ");
            WriteLiteral(@"        <th scope=""row"">{{element.idPermiso}}</th>
                        <td>{{element.nombreEmpleado}}</td>
                        <td>{{element.apellidoEmpleado}}</td>
                        <td>{{element.fechaPermiso}}</td>
                        <td>{{element.tipoPermiso.descripcion}}</td>
                        <td><button type=""button"" class=""btn btn-primary"" data-toggle=""modal"" data-target=""#modalEdit"" v-on:click=""setData(element)"">Edit</button></td>
                        <td><button type=""button"" class=""btn btn-danger"" data-toggle=""modal"" data-target=""#modalDelete"" v-on:click=""setDelete(element)"">Delete</button></td>

                    </tr>
                </tbody>
            </table>
        </div> 

        <!-- Modal Saved and Edit -->
        <div class=""modal fade"" id=""modalEdit"" tabindex=""-1"" role=""dialog"" aria-labelledby=""exampleModalLabel"" aria-hidden=""true"">
            <div class=""modal-dialog"" role=""document"">
                <div class=""modal-content"">
        ");
            WriteLiteral(@"            <div class=""modal-header"">
                        <h5 class=""modal-title"" id=""exampleModalLabel"">Permisos</h5>
                        <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                            <span aria-hidden=""true"">&times;</span>
                        </button>
                    </div>
                    <div class=""modal-body"">
                        ");
            __tagHelperExecutionContext = __tagHelperScopeManager.Begin("form", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "0fff7b8d2cbd3f600ca1c873d5b846615f231b2c6956", async() => {
                WriteLiteral(@"
                            <div class=""form-row"">
                                <div class=""col-md-4 mb-3"">
                                    <label for=""validationServer01"">First name</label>
                                    <input v-model=""permiso.nombreEmpleado"" type=""text"" class=""form-control "" id=""name"" placeholder=""First name"" required>
                                    <div class=""invalid-feedback"">
                                        Obligatory field
                                    </div>
                                </div>
                                <div class=""col-md-4 mb-3"">
                                    <label for=""validationServer02"">Last name</label>
                                    <input v-model=""permiso.apellidoEmpleado"" type=""text"" class=""form-control "" id=""lastname"" placeholder=""Last name"" required>
 
                                    <div class=""invalid-feedback"">
                                        Obligatory field
                 ");
                WriteLiteral(@"                   </div>
                                </div>


                            </div>
                            <div class=""form-row""> 
                                <div class=""col-md-6 mb-1"">

                                    <label for=""type"">Type</label>
                                    <select v-model=""permiso.idTipoPermiso"" class=""form-control "" id=""type"">
                                        ");
                __tagHelperExecutionContext = __tagHelperScopeManager.Begin("option", global::Microsoft.AspNetCore.Razor.TagHelpers.TagMode.StartTagAndEndTag, "0fff7b8d2cbd3f600ca1c873d5b846615f231b2c8758", async() => {
                    WriteLiteral("\r\n                                            {{item.descripcion}}\r\n                                        ");
                }
                );
                __Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.OptionTagHelper>();
                __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_OptionTagHelper);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_0);
                __tagHelperExecutionContext.AddHtmlAttribute(__tagHelperAttribute_1);
                await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
                if (!__tagHelperExecutionContext.Output.IsContentModified)
                {
                    await __tagHelperExecutionContext.SetOutputContentAsync();
                }
                Write(__tagHelperExecutionContext.Output);
                __tagHelperExecutionContext = __tagHelperScopeManager.End();
                WriteLiteral(@"
                                    </select>


                                    <div class=""invalid-feedback"">
                                        Obligatory field
                                    </div>
                                </div>

                            </div>


                        ");
            }
            );
            __Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.FormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_FormTagHelper);
            __Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper = CreateTagHelper<global::Microsoft.AspNetCore.Mvc.TagHelpers.RenderAtEndOfFormTagHelper>();
            __tagHelperExecutionContext.Add(__Microsoft_AspNetCore_Mvc_TagHelpers_RenderAtEndOfFormTagHelper);
            await __tagHelperRunner.RunAsync(__tagHelperExecutionContext);
            if (!__tagHelperExecutionContext.Output.IsContentModified)
            {
                await __tagHelperExecutionContext.SetOutputContentAsync();
            }
            Write(__tagHelperExecutionContext.Output);
            __tagHelperExecutionContext = __tagHelperScopeManager.End();
            WriteLiteral(@"
                    </div>
                    <div class=""modal-footer"">
                        <button type=""button"" class=""btn btn-secondary"" data-dismiss=""modal"">Close</button>
                        <button type=""button"" class=""btn btn-primary"" v-on:click=""saveData"">Save</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal Saved and Edit -->

        <!-- Modal Delete-->
        <div class=""modal"" id=""modalDelete"" tabindex=""-1"" role=""dialog"">
            <div class=""modal-dialog"" role=""document"">
                <div class=""modal-content"">
                    <div class=""modal-header"">
                        <h5 class=""modal-title"">Delete</h5>
                        <button type=""button"" class=""close"" data-dismiss=""modal"" aria-label=""Close"">
                            <span aria-hidden=""true"">&times;</span>
                        </button>
                    </div>
                    <div class=""modal-body"">
   ");
            WriteLiteral(@"                     <p>
                            You are sure you want to delete this data?
                        </p>
                    </div>
                    <div class=""modal-footer"">
                        <button type=""button"" class=""btn btn-primary"" v-on:click=""deleteData"">Yes</button>
                        <button type=""button"" class=""btn btn-secondary"" data-dismiss=""modal"">No</button>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Modal Delete-->
    </div>



    </div>
 


");
            DefineSection("Scripts", async() => {
                WriteLiteral(@"
    <script>
        var app = new Vue({
            el: ""#app"",
            data: {
                search: """",
                message: """",
                permiso: {
                    IdPermiso: 0,
                    idTipoPermiso: 0,
                    nombreEmpleado: """",
                    apellidoEmpleado: """",
                    fechaPermiso: """",
                    tipoPermiso: { idTipoPermiso: 1 }

                },

                msgErrorNombre: """",
                msgErrorApellido: """",
                msgErrorFecha: """",
                msgErrorTipo: """",
                error: false,
                permisos: [],
                update: false,
                tipos: []

            },
            created: function () {
                this.getPermisos();
            },
            methods: {
                initCreate: function () {
                    this.update = false;
                    var date = new Date();
                    this.permiso.idPermiso");
                WriteLiteral(@" = 0;
                    this.permiso.nombreEmpleado = """";
                    this.permiso.apellidoEmpleado = """";
                    this.permiso.fechaPermiso = date;
                    this.permiso.idTipoPermiso = 0;
                    this.permiso.tipoPermiso = { idTipoPermiso: 1 };
                    $(""#name"").removeClass(""is-invalid is-valid"");
                    $(""#lastname"").removeClass(""is-invalid is-valid"");
                    $(""#type"").removeClass(""is-invalid is-valid"");
                    this.getTipoPermiso();
                },
                setData: function (element) {
                    this.initCreate();
                    this.update = true;
                    var date = new Date(element.fechaPermiso);
                    console.log(date)
                    this.permiso.idPermiso = element.idPermiso;
                    this.permiso.nombreEmpleado = element.nombreEmpleado;
                    this.permiso.apellidoEmpleado = element.apellidoEmpleado;
     ");
                WriteLiteral(@"               this.permiso.fechaPermiso = element.fechaPermiso;
                    this.permiso.idTipoPermiso = element.idTipoPermiso;
                    this.permiso.tipoPermiso = element.tipoPermiso;
                    this.getTipoPermiso();

                },
                setDelete: function (e) {
                    this.permiso.idPermiso = e.idPermiso;
                },
                getTipoPermiso: function () {
                    this.tipos = [];

                    this.$http.get(""/getTipo"").then(function (resp) {
                        this.tipos = resp.body;
                        console.log(""bodyalltt"", resp.body);
                    });


                },
                deleteData: function (e) {
                    
                    $.ajax({
                        url: ""/delete/"" + this.permiso.idPermiso,
                        method: ""PUT"", 
                    }).done((data) => {

                        this.getPermisos();
                  ");
                WriteLiteral(@"       $('#modalDelete').modal('hide');
                        //this.permisos.splice(0, 0, permiso);

                    });



                },
                saveData: function() {
                    var permiso = { 
                        IdPermiso: this.permiso.idPermiso,
                        NombreEmpleado: this.permiso.nombreEmpleado,
                        ApellidoEmpleado: this.permiso.apellidoEmpleado ,
                        FechaPermisothis: this.permiso.fechaPermiso,
                        IdTipoPermiso: this.permiso.idTipoPermiso  
                    }
                    var error = false;
                    if (this.permiso.nombreEmpleado.trim() === """") {
                        $(""#name"").addClass(""is-invalid"");
                        error = true;
                    } else {
                        $(""#name"").removeClass(""is-invalid"").addClass(""is-valid"");
                    }

                    if (this.permiso.apellidoEmpleado.trim() === """") {
 ");
                WriteLiteral(@"                       $(""#lastname"").addClass(""is-invalid"");
                        error = true;
                    } else {
                        $(""#lastname"").removeClass(""is-invalid"").addClass(""is-valid"");
                    } 

                    if (!this.permiso.idTipoPermiso > 0) {
                        $(""#type"").addClass(""is-invalid"");
                        error = true;
                    } else {
                        $(""#type"").removeClass(""is-invalid"").addClass(""is-valid""); 
                    }
                    console.log(""Error"", error);
                    if (error == false) {
                        var url = ""/update"";
                        if (this.update == true) {
                            url = ""/update"";
                        } else {
                            url = ""/create"";
                        }
                        $.ajax({
                            url: url,
                            method: this.update == true ? ""POST""");
                WriteLiteral(@" : ""PUT"",
                            data: permiso
                        }).done( (data) =>{
                         
                            this.getPermisos();
                            $('#modalEdit').modal('hide');
                            //this.permisos.splice(0, 0, permiso);

                        });
                    }


                },
                getPermisos: function () {
                    this.permisos = [];
                    this.$http.get(""http://localhost:51613/permisos"").then(function (resp) {
                        this.permisos = resp.body;
                        console.log(""bodyall"", resp.body);
                    });
                }
            }
        });

    </script>
");
            }
            );
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<dynamic> Html { get; private set; }
    }
}
#pragma warning restore 1591
